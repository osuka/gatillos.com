---
layout: default
---

  {% comment %}
*******************************************
    Normally, next/previous can be done like the following snippet, but we want it to be per-category.
      {% if page.next.url %} 
      <a href="{{ site.baseurl }}{{page.next.url}}" title="next Post: 
        {{page.next.title}}">{{page.next.title}} &raquo; </a> 
      {% endif %} 
      {% if page.previous.url %} 
      <a href="{{ site.baseurl }}{{page.previous.url}}" title="Previous Post: 
        {{page.previous.title}}">&laquo; {{page.previous.title}}</a> 
      {% endif %} 

    Instead, what we will do is traverse an array with all posts of the current category, looking for
    the one we are in right now. Once found, we now the previous/next ones.
*******************************************
  {% endcomment %}

{% assign this_category = page.categories[0] %}
{% if this_category == 'comics' %}
  {% assign this_category = page.categories[1] %}
{% endif %}
{% assign all_posts = site.categories[this_category] | sort %}

{% for post in all_posts %}
  {% if post.url == page.url %}
    {% assign post_index0 = forloop.index0 %}
    {% assign post_index1 = forloop.index %}
  {% endif %}
{% endfor %}
{% for post in all_posts %}
  {% if post_index0 == forloop.index %}
    {% assign next_post = post %}
  {% endif %}
  {% if post_index1 == forloop.index0 %}
    {% assign prev_post = post %}
  {% endif %}
{% endfor %}

<div id="post_title">
  <h2>
   {{ page.title }} <small>{{ page.date || date_to_string }}</small>
  </h2>
</div>

<div id="navigation">
      {% assign p = all_posts.last %}
      {% if p.url == page.url %}
        <a class="first disabled" href="" title="">First</a> 
      {% else %}
        <a class="first" href="{{ site.baseurl }}{{p.url}}" title="first: {{p.title}}">First</a> 
      {% endif %}

      {% if prev_post %} 
        {% assign p = prev_post %}
        <a class="previous" href="{{ site.baseurl }}{{p.url}}" title="previous: {{p.title}}">Previous</a> 
      {% else %}
        <a class="previous disabled" href="" title="">Previous</a> 
      {% endif %} 

      {% if next_post %}  
        {% assign p = next_post %}
        <a class="next" href="{{ site.baseurl }}{{p.url}}" title="next: {{p.title}}">Next</a> 
      {% else %}
        <a class="next disabled" href="" title="">Next</a> 
      {% endif %} 

      {% assign p = all_posts.first %}
      {% if p.url != page.url %}
        <a class="last" href="{{ site.baseurl }}{{p.url}}" title="last: {{p.title}}">Last</a> 
      {% else %}
        <a class="last disabled" href="" title="">Last</a> 
      {% endif %}
</div>


<div id="post" role="main">
  {{ content }}
</div>

    <div class="right"> 
      {% if prev_post %} 
        <a href="{{ site.baseurl }}{{prev_post.url}}" title="previous: {{prev_post.title}}">&laquo; {{prev_post.title}}</a> 
      {% endif %} 
      {% if next_post %} 
        {% if prev_post %} | {% endif %}
        <a href="{{ site.baseurl }}{{next_post.url}}" title="next: {{next_post.title}}">{{next_post.title}} &raquo; </a> 
      {% endif %} 
    </div> 

<nav>
  <ul class="clearfix">
  {% for category in page.categories %}
    <li><a href="{{ site.baseurl }}/{{ category }}">{{ category }}</a></li>
  {% endfor %}
  </ul>
</nav>

<!--h2>Related Posts</h2>
<ul class="posts_list">
  {% for post in site.related_posts limit:3 %}
    {% include post.html %}
  {% endfor %}
</ul-->

<hr/>

<h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = '{{ site.disqus_id }}'; // required: replace example with your forum shortname
    //var disqus_developer = 1; // developer mode is on, for testing locally
    //var disqus_identifier = '/some/id';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
